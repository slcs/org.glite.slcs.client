#!/bin/bash
#
# Execute the SLCS client
#
# $Id: slcs-init,v 1.1 2006/10/24 09:24:18 vtschopp Exp $
# Copyright (c) 2004. Members of the EGEE Collaboration. 
# http://www.eu-egee.org
#
#set -x

# dertermine current directory
BINDIR=`dirname $0`
SLCS_HOME=`cd $BINDIR/..; pwd`

# source java conf
if [ -z $JAVA_HOME ]; then
    if [ -r /etc/java/java.conf ]; then
        . /etc/java/java.conf
    fi
fi

# /opt/glite/etc/glite-slcs-ui in CLASSPATH
SLCS_CP=$SLCS_HOME/etc/glite-slcs-ui

# glite slcs libs
for slcs_jar in $SLCS_HOME/share/java/glite-slcs-*.jar ; do
    SLCS_CP=$SLCS_CP:$slcs_jar
done
# external slcs libs classpath
BOUNCY_CP=$SLCS_HOME/externals/share/java/bcprov-jdk14-133.jar
COMMONS_CP=$SLCS_HOME/externals/share/java/commons-cli-1.0.jar:$SLCS_HOME/externals/share/java/commons-codec-1.3.jar:$SLCS_HOME/externals/share/java/commons-collections-3.2.jar:$SLCS_HOME/externals/share/java/commons-configuration-1.2.jar:$SLCS_HOME/externals/share/java/commons-httpclient-3.0.1.jar:$SLCS_HOME/externals/share/java/commons-lang-2.1.jar:$SLCS_HOME/externals/share/java/commons-logging-1.0.4.jar
JHTML_CP=$SLCS_HOME/externals/share/java/jericho-html-2.2.jar
LOG4J_CP=$SLCS_HOME/externals/share/java/log4j.jar:$SLCS_HOME/externals/share/java/log4j-1.2.13.jar

# SLCS classpath
SLCS_CP=$SLCS_CP:$BOUNCY_CP:$COMMONS_CP:$JHTML_CP:$LOG4J_CP
#echo $SLCS_CP

if [ -z $JAVA_HOME ]; then
    java $JAVA_OPTS -classpath $SLCS_CP org.glite.slcs.SLCSClient $*
else
    $JAVA_HOME/bin/java $JAVA_OPTS -classpath $SLCS_CP org.glite.slcs.SLCSClient $*
fi

exit $?
